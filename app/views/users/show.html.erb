<div class= "panel panel-default">
	<div class= "panel-body">

		<li><%= image_tag(@user.avatar.url(:thumb)) %></li>
		<br>
		<p>Email: <%= @user.email %></p>
		<p>Username: <%= @user.username %> </p>
		<p>Indirizzo: <%= @user.indirizzo %> </p>
		<p>Anno di nascita: <%= @user.annonascita %> </p>

		<% if user_signed_in? %>
			<%  if can? :update, @user%>
				<%= link_to 'Edit Profile', edit_user_registration_path, class: "btn btn-info" %>
			<% end %>
			<% if @user.id != current_user.id %>
				<%= link_to 'Segnala utente', new_report_path(:user => @user.id), class: "btn btn-danger"%>
			<%end%>
		<% end %>

		<% if user_signed_in? && @user.id == current_user.id %>
			<p></p>
		<% else %>
			<br>
			<h1>Libri desiderati</h1>
			<div>
				<table class= "table table-striped table-bordered">
				  <thead>
				    <tr>
				      <th>Nome</th>
				      <th>Autore</th>
				      <th>Genere</th>
				      <th>Anno</th>
				      <th>Isbn</th>
				      <th>User</th>
				      <th colspan="3"></th>
				    </tr>
				  </thead>

				  <tbody>
				    <% @user.DesideredBook.each do |desidered_book| %>
				      <tr>
				        <td><%= desidered_book.nome %></td>
				        <td><%= desidered_book.autore %></td>
				        <td><%= desidered_book.genere %></td>
				        <td><%= desidered_book.anno %></td>
				        <td><%= desidered_book.ISBN %></td>
				        <td><%= desidered_book.user.username %></td>
				        <% if can? :read, desidered_book %>
				        <td><%= link_to 'Show', desidered_book %></td>
				        <% end %>
				        <% if can? :update, desidered_book %>
				        <td><%= link_to 'Edit', edit_desidered_book_path(desidered_book) %></td>
				        <% end %>
				        <% if can? :delete, desidered_book %>
				        <td><%= link_to 'Destroy', desidered_book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
				        <% end %>
				      </tr>
				    <% end %>
				  </tbody>
				</table>
			</div>
			<br>
			<h1>Libri proposti</h1>
			<div>
				<table class= "table table-striped table-bordered">
				  <thead>
				    <tr>
				      <th>Nome</th>
				      <th>Autore</th>
				      <th>Genere</th>
				      <th>Stato</th>
				      <th>Anno</th>
				      <th>Isbn</th>
				      <th>User</th>
				      <th colspan="3"></th>
				    </tr>
				  </thead>

				  <tbody>
				    <% @user.ProposedBook.each do |proposed_book| %>
				      <tr>
				        <td><%= proposed_book.nome %></td>
				        <td><%= proposed_book.autore %></td>
				        <td><%= proposed_book.genere %></td>
				        <td><%= proposed_book.stato %></td>
				        <td><%= proposed_book.anno %></td>
				        <td><%= proposed_book.ISBN %></td>
				        <td><%= proposed_book.user.username %></td>
				        <% if can? :read, proposed_book %>
				        <td><%= link_to 'Mostra', proposed_book %></td>
				        <% end %>
				        <% if can? :update, proposed_book %>
				        <td><%= link_to 'Modifica', edit_proposed_book_path(proposed_book) %></td>
				        <% end %>
				        <% if can? :delete, proposed_book %>
				        <td><%= link_to 'Elimina', proposed_book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
				        <% end %>
				      </tr>
				    <% end %>
				  </tbody>
				</table>
			</div>
		<%end%>

		<% if can? :create, UserReview %>
			<% if @user.id != current_user.id %>
				<br>
				<h1>Recensisci Utente</h1>
				<%= form_for :user_review, :url => {:action => 'create', :controller => 'user_reviews'} do |f| %>
					<p><%= f.select "rating", options_for_select([ "1", "2", "3", "4", "5"], "3") %></p>
					<p><%= f.text_area :comment, :size => "75x3" %></p>
					<%= f.hidden_field :user_id, :value => @user.id %>
					<%= f.hidden_field :reviewer, :value => current_user.username %>
					<%= f.submit "Conferma", :action => :create %>
		    	<% end %>
		  	<% end %>
	    <% end %>

	    <h1>Recensioni </h1>
	    <div>
		    <%= render :partial => 'user_reviews/list'%>
	    </div>
	</div>
</div>